---
title: "Open Refine with Talis Aspire"
author: "D. Spence"
date: "29th of September, 2021"
output: 
  html_document:
    theme: darkly
    toc: yes
    toc_float:
      collapsed: no
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Introduction to Open Refine

Open Refine, formerly known as Google Refine is a tool for exploring data sets, transforming it into something useful and enhancing it into something more useful. The goal of this guide is to explain the basics of Open Refine using Talis Aspire data as an example. Open Refine supports MARC so it can also be used when cataloguing. 

I have been using Open Refine to proactively find problems in reading lists and fix them procedurally. On the reports tab of Talis reading lists you can export a list of all published items in a comma separated values files. This can be then be imported into Open Refine. Below I have included a table explaining what each of the fields translates to.

## Installing Open Refine
The instructions to install Open Refine can be found on the [Open Refine download page](https://openrefine.org/download.html). It supports Windows, Mac and Linux and runs in your web browser. I have had success running it at home and on office computers, if you do not know whether you have Java installed on Windows the version that comes bundled with Java is the easiest way to get started. As most staff are no longer permitted to install software on campus computers I have requested IT Services add OpenRefine to the [university software hub](https://software.essex.ac.uk) which is currently in progress as of September 2021.

## Downloading Talis Aspire data

Data can be downloaded from [Talis Aspire Reports](https://essex.rl.talis.com/reports/523E347F-38CF-E58D-929C-326B7FF25E75.html). For this guide I have been focusing on the All List Items section as my role focuses on checking lists for errors. It is worth bearing in mind that larger data sets require powerful computers. When I tried to import all 603,000 items (at the time of writing) my computer seized up due to a lack of ram. By default the software caps out at 1GB of ram, jumping up to 2GB allowed me to import the full data set. Instructions on how to do this can be found in the [Using OpenRefine book](https://subscription.packtpub.com/book/big_data_and_business_intelligence/9781783289080/1/ch01lvl1sec15/recipe-7-going-for-more-memory). It is best practice to only work on what you think you need to because actions can get sluggish. which is currently in progress as of September 2021. which is currently in progress as of September 2021. which is currently in progress as of September 2021. which is currently in progress as of September 2021. which is currently in progress as of September 2021.

Filtering list status only to only published brings it down to a manageable 129,000. Depending on the status of rollover you may want to filter by Time Period to catch items that are unpublished. Once you have your data click download CSV. This will e.mail the Talis user a link to download the CSV file. For all published items this came out to about 53 megabytes.

## Importing data into Refine

Double click the OpenRefine icon where you installed it. For me this was C:\Users\Spence\Desktop\openrefine-3.4.1\openrefine.exe. I have found searching for the app via the Windows Start menu does not open the app. This will open your default web browser to the URL [http://127.0.0.1:3333/](http://127.0.0.1:3333/) this URL only works when the OpenRefine application is running. The home screen should have a browse button to locate the all_list_items_2021_04_12.csv you just downloaded. From there just click next and create project to start playing around with your data. Once you have created a project it will be visible on the Open Project tab to the left. It saves whatever youâ€™ve done and has a full history.

## Aspire data fields

Below I have included some notes on the fields Talis exposes. If you are familiar with editing reading lists most of this will look familiar but some of these fields are hidden. Knowing what field to filter first is the key to finding the right list items that most need attention.

```{r, echo=FALSE, message=FALSE}
library(readr)
library(knitr)
library(kableExtra)
opts <- options(knitr.kable.NA = "")
alllistitemscolumn <- read_csv("alllistitemscolumn.csv")
kable(alllistitemscolumn[1:39, ], caption = "All list items report collumn headers with example fields and notes") %>%
  kable_styling(bootstrap_options = "striped", full_width = FALSE)
```
